<div class="container">
    <div *ngIf="tree_name === 'القرآن'" class="instructions" style="right: 0;">
        <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 242.884"><path fill-rule="nonzero" d="M128.707 192.316c-4.939 3.88-8.073 9.784-8.073 18.503 0 18.606 15.267 30.408 33.055 30.408h56.328c62.753 5.062 81.359-1.735 122.717-16.851 8.403-3.071 17.802-6.507 29.381-10.463a107.946 107.946 0 018.879-2.612c.629 8.23 7.539 14.75 15.927 14.75h17.683c.371 0 .736-.026 1.093-.075 2.648 7.487 9.812 12.888 18.17 12.888h68.87c10.572 0 19.263-8.692 19.263-19.264V28.54c0-10.591-8.688-19.262-19.263-19.262h-68.87c-8.377 0-15.533 5.393-18.174 12.886a8 8 0 00-1.089-.074h-17.683c-8.659 0-15.807 7.054-15.969 15.677-5.779-2.083-13.556-6.479-22.331-11.438-31.893-18.027-75.338-42.581-111.048-11.403-.663.578-1.269 1.119-1.831 1.63H34.602C15.788 16.556 0 30.624 0 49.833c0 19.213 15.783 33.278 34.602 33.278h75.1c-7.712 4.63-12.88 12.357-12.88 23.422 0 12.578 6.886 22.896 16.948 28.388-10.848 3.596-18.826 11.595-18.826 25.553 0 19.138 15.503 31.517 33.763 31.842z"/><path fill="#FDD0BF" d="M234.648 160.677c2.742-11.949 3.021-25.305 1.168-40.026a4.615 4.615 0 011.868-4.434l17.589-12.697a4.43 4.43 0 01.313-.227l14.497-10.464a4.616 4.616 0 015.393 7.492l-10.101 7.291c10.04 8.947 21.411 15.504 34.663 18.677 15.166 3.63 32.945 2.89 54.203-3.676a4.621 4.621 0 015.774 3.058 4.621 4.621 0 01-3.059 5.773c-22.921 7.08-42.315 7.827-59.052 3.82-15.567-3.727-28.716-11.521-40.185-22.125l-12.436 8.977c1.636 14.787 1.197 28.338-1.624 40.625-2.923 12.742-8.389 24.113-16.717 34.081 2.446 10.939-1.205 26.872-14.938 35.801 74.422 6.05 83.327-4.967 147.355-26.843a117.365 117.365 0 0111.589-3.303V46.769C343.194 39.142 279.862-20.92 236.784 27.8l-41.887 61.454c-6.649 9.756-5.812 8.353-6.286 20.1l-2.389 59.196c-1.906 42.629 38.619 34.891 48.426-7.873zm-50.966 33.632h-29.993c-13.449 0-24.451 3.061-24.451 16.51 0 13.836 11.473 21.804 24.451 21.804h48.261c7.631-5.077 17.678-22.379 16.946-31.875-3.019 1.882-6.037 3.184-8.992 3.946-5.82 1.499-11.334.938-16.206-1.406-3.967-1.909-7.368-4.954-10.016-8.979zm10.871-119.794H34.602c-14.303 0-26.005-10.378-26.005-24.682 0-14.496 11.918-24.68 26.005-24.68h193.595c-.841 1.21-1.759 2.583-2.893 4.246l-30.751 45.116zm-15.383 56.094h-48.345c-13.754 0-25.399-9.91-25.399-24.076 0-13.97 11.436-20.105 25.399-20.105h55.609c-2.788 4.109-4.187 6.335-5.135 9.371-.917 2.932-.994 5.344-1.137 9.824l-.121 3.395-.871 21.591zm-.057 53.111h-49.671c-14.242 0-25.894-9.005-25.894-23.246 0-15.13 13.087-19.275 25.894-19.275h49.3l-1.089 26.982c-.257 5.734.277 10.955 1.46 15.539z"/><path fill="#FFE2D4" d="M234.648 160.677c2.742-11.949 3.021-25.305 1.168-40.026a4.615 4.615 0 011.868-4.434l17.589-12.697a4.43 4.43 0 01.313-.227l14.497-10.464a4.616 4.616 0 015.393 7.492l-10.101 7.291c10.04 8.947 21.411 15.504 34.663 18.677 15.166 3.63 32.945 2.89 54.203-3.676a4.621 4.621 0 015.774 3.058 4.621 4.621 0 01-3.059 5.773c-22.921 7.08-42.315 7.827-59.052 3.82-15.567-3.727-28.716-11.521-40.185-22.125l-12.436 8.977c1.636 14.787 1.197 28.338-1.624 40.625-2.821 12.296-8.011 23.316-15.854 33.031 5.242 10.947 4.587 27.632-9.592 36.851 74.422 6.05 77.118-4.965 141.146-26.843a117.365 117.365 0 0111.589-3.303V60.004c-27.752-7.687-91.086-70.335-134.164-21.615l-36.593 50.865c-6.648 9.756-5.812 8.353-6.286 20.1l-2.388 59.196c-1.105 24.734 9.995 36.47 26.582 22.26 9.459-8.109 13.471-16.722 16.549-30.133zM179.113 183.72h-44.376c-14.241 0-25.894-5.033-25.894-19.276 0-15.312 13.881-16.627 25.894-16.627h43.739l-.823 20.364c-.257 5.734.277 10.955 1.46 15.539zM179.17 130.609h-41.726c-13.968 0-25.399-7.459-25.399-21.429 0-15.024 13.675-16.134 25.399-16.134h44.934a20.226 20.226 0 00-1.079 2.753c-.917 2.932-.994 5.344-1.137 9.824l-.121 3.395-.871 21.591zM194.553 74.515H42.544c-14.302 0-26.005-3.76-26.005-18.064 0-14.873 12.456-22.033 26.005-22.033h179.338L211.48 49.68l-16.927 24.835z"/><path fill="#FFE2D4" d="M185.633 199.604H157.66c-13.448 0-24.452.414-24.452 13.863 0 14.183 12.097 19.156 24.452 19.156h44.29c7.631-5.077 17.678-22.379 16.946-31.875-3.019 1.882-6.037 3.184-8.992 3.946-3.6.927-7.083 1.067-10.369.483-7.045 2.177-12.145.616-13.902-5.573z"/><path fill="#E1BEB1" d="M221.493 171.641l-24.814-4.789c.048 4.965-.555 11.716 1.026 16.226 3.36 9.574 14.006 10.959 21.397-4.629l2.391-6.808z"/><path fill="#3C69A0" d="M412.609 28.54V219.6c0 6.192 5.067 11.258 11.258 11.258h68.87c6.191 0 11.258-5.067 11.258-11.258V28.54c0-6.191-5.066-11.257-11.258-11.257h-68.87c-6.192 0-11.258 5.065-11.258 11.257zm30.524 19.691c0 8.377 6.792 15.168 15.169 15.168s15.168-6.791 15.168-15.168c0-8.377-6.791-15.169-15.168-15.169-8.377 0-15.169 6.792-15.169 15.169z"/><path fill="#fff" d="M378.953 38.063v172.015c0 4.383 3.589 7.968 7.968 7.968h17.683V30.095h-17.683c-4.383 0-7.968 3.586-7.968 7.968z"/></svg>
        <h2>يمكنك إضافة إجازتك للقرآن لهذا المشروع!</h2>
    ابدأ باختيار الراوي ثم اتبع الخطوات ..
    </div>
    <div *ngIf="tree_name !== 'القرآن'" class="instructions" style="right: 0;">
    لإضافة إجازتك للقران: <br />
        <ol style="padding: 10px 20px 0 0;">
            <li>اختر أخفض فرع تحت الراوي</li>
            <li>انقر على أضف تلميذا ثم املأ البيانات</li>
            <li>انقر على ارفع البيانات</li>
            <li> احفظ رابط طلبك لمتابعته</li>
        </ol>
        ستتم المراجعة ثم نشر إجازتك خلال 3 ايام عمل ان شاء الله
    </div>
    <div *ngIf="tree_name === 'القرآن'" class="instructions" style="right: 300px;">
        <h3>مفتاح الشجرة</h3>
        <table>
            <tr>
                <td>
                    <div class="wahi">كل متصل بوحي</div>
                </td>
                <td>
                    <div class="qari7">القرّاء السبعة</div>

                </td>
            </tr>
            <tr>
                <td>
                    <div class="sahabi">صحابي</div>
                </td>
                <td>
                    <div class="qari10">تتمة القرّاء العشرة</div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="tabei">تابعي</div>
                </td>
                <td>
                    <div class="rawi">راوي</div>
                </td>
            </tr>
        </table>
    </div>

    <ngx-treant-chart
        *ngIf="displayChart"
        [chartId]="basicPopoverId"
        [chartClass]="basicPopoverClass"
        [data]="basicPopoverData"
        [isDraggable]="false"
        [popoverSettings]="popoverSettings"
        [mouseleaveMilliseconds]="300"
        (clicked)="onClick($event)"
        (hovered)="onHover($event)"
        (loadedNodes)="onLoadNodes($event)"
        (loadedTree)="onLoadTree($event)"
        (loadedTreant)="onLoadTreant($event)"
    >
    </ngx-treant-chart>
</div>

<button type="button" class="upload-button" *ngIf="uploadable" aria-label="Upload" [disabled]="isUploading" (click)="upload()">
    <ng-container *ngIf="isUploading; else elseNotUploading">
        <span class="material-icons">sync</span>
    </ng-container>
    <ng-template #elseNotUploading>
        <span class="material-icons">check</span>
    </ng-template>
    <span>ارفع البيانات</span>
</button>

<ng-template #template>
    <div class="modal-header">
        <h2 class="modal-title pull-left">أضف تلميذا</h2>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="name">الاسم (اجباري)</label>
                <input
                    type="text"
                    class="form-control"
                    id="name"
                    formControlName="name"
                    placeholder="أدخل الاسم كما في الإجازة"
                />
            </div>
            <div id="form-group2">
                <div class="form-group">
                    <label for="place">المدينة</label>
                    <input
                        type="text"
                        class="form-control"
                        id="place"
                        formControlName="place"
                        placeholder="أدخل المدينة أو البلد"
                    />
                </div> &nbsp;&nbsp;
                <div class="form-group">
                    <label for="place">سنة الوفاة</label>
                    <input
                        type="number"
                        class="form-control"
                        id="date"
                        formControlName="date"
                        placeholder=" التاريخ الهجري للوفاة (يُترك للأحياء)"
                        ngxDateValidator
                        [class.is-invalid]="(registerForm.get('date').touched || registerForm.get('date').dirty) && registerForm.get('date').invalid"
                    />
                </div>
            </div>
            <div class="form-group">
                <label for="contact">العنوان الاكتروني</label>
                <input
                    type="text"
                    class="form-control"
                    id="contact"
                    formControlName="contact"
                    placeholder="أدخل عنوان صفحة شخصية أو ويكي أو ايميل"
                />
            </div>
            <div class="form-group">
                <label for="image">صورة الإجازة</label>
                <div id="form-group2">
                    <input
                        type="text"
                        class="form-control"
                        id="image"
                        formControlName="image"
                        placeholder="اختر صورة واضحة حجمها أقل من 1 ميجا بايت"
                    />
                    <input
                        type="file" #filePicker
                        accept="image/png, image/jpeg"
                        style="display:none"
                        (change)="onImagePicked($event)"
                    />
                    <button type="button" class="btn btn-secondary" (click)=" filePicker.click() ">اختر ملف</button>
                </div>
            </div>
            <button type="submit" id="submit" class="btn btn-primary" [disabled]="!f.name.value">أضف</button>
        </form>
    </div>
</ng-template>

<ng-template #confirm_pr>
    <div class="modal-header">
        <h2 class="modal-title pull-left">تم رفع طلبك بنجاح</h2>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        تم رفع طلب إضافتك على الرابط التالي، سوف نقوم بمراجعته ثم نشره إن شاء الله
        <div id="confirm_pr">
            <a href="{{ 'https://github.com/Quran-Labs/quran.team/pull/' + prNumber}}" target="_blank">طلب رقم {{prNumber}}</a>
            <br />
            (قم بحفظ الرابط، لن يظهر لك مجددا)
            <br /> <br />
            <button class="btn btn-primary" (click)="modalRef.hide()">تم</button>     
        </div>
    </div>
</ng-template>
